{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\com\\\\Desktop\\\\YH\\\\next\\\\pages\\\\profile.js\",\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport AppLayout from \"../components/AppLayout\";\nimport Head from \"next/head\";\nimport NicknameEditForm from \"../components/NicknameEditForm\";\nimport Router from \"next/router\";\nimport FollowList from \"../components/FollowList\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST } from \"../type\";\nimport axios from \"axios\";\nimport useSWR from \"swr\";\nvar fetcher = function fetcher(url) {\n  return axios.get(url, {\n    withCredentials: true\n  }).then(function (result) {\n    return result.data;\n  });\n};\nvar Profile = function Profile() {\n  _s();\n  var _useState = useState(3),\n    followersLimit = _useState[0],\n    setfollowersLimit = _useState[1];\n  var dispatch = useDispatch();\n  var _useSelector = useSelector(function (state) {\n      return state.user;\n    }),\n    me = _useSelector.me;\n  var _useSWR = useSWR(\"http://localhost:3075/user/followers?limit=\".concat(followersLimit), fetcher),\n    followersData = _useSWR.data,\n    followerError = _useSWR.followerError;\n  var _useSWR2 = useSWR(\"http://localhost:3075/user/followingslimit=\".concat(followingsLimit), fetcher),\n    followingsData = _useSWR2.data,\n    followingError = _useSWR2.followingError;\n\n  /* useEffect(() => {\n    dispatch({\n      type: LOAD_FOLLOWERS_REQUEST,\n    });\n    dispatch({\n      type: LOAD_FOLLOWINGS_REQUEST,\n    });\n  }, []);\n  */\n\n  useEffect(function () {\n    if (!(me && me.id)) {\n      Router.push(\"/\");\n    }\n  }, [me && me.id]);\n  if (!me) {\n    return \"내 정보 로딩 중\";\n  }\n  if (followerError || followingError) {\n    console.error(followerError || followingError);\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 12\n      }\n    }, \"\\uD314\\uB85C\\uC789/\\uD314\\uB85C\\uC6CC \\uB85C\\uB529 \\uC911 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD569\\uB2C8\\uB2E4.\");\n  }\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"\\uB0B4 \\uD504\\uB85C\\uD544\")), __jsx(AppLayout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, __jsx(NicknameEditForm, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), __jsx(FollowList, {\n    header: \"\\uD314\\uB85C\\uC789\",\n    data: followingsData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), __jsx(FollowList, {\n    header: \"\\uD314\\uB85C\\uC6CC\",\n    data: followersData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  })));\n};\n_s(Profile, \"/Q/6M5+kxtjZAkENxjHqv5TByVE=\", false, function () {\n  return [useDispatch, useSelector, useSWR, useSWR];\n});\n_c = Profile;\nexport var __N_SSP = true;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","AppLayout","Head","NicknameEditForm","Router","FollowList","useDispatch","useSelector","LOAD_FOLLOWERS_REQUEST","LOAD_FOLLOWINGS_REQUEST","axios","useSWR","fetcher","url","get","withCredentials","then","result","data","Profile","_s","_useState","followersLimit","setfollowersLimit","dispatch","_useSelector","state","user","me","_useSWR","concat","followersData","followerError","_useSWR2","followingsLimit","followingsData","followingError","id","push","console","error","__jsx","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","header","_c","__N_SSP","$RefreshReg$"],"sources":["C:/Users/com/Desktop/YH/next/pages/profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport AppLayout from \"../components/AppLayout\";\nimport Head from \"next/head\";\nimport NicknameEditForm from \"../components/NicknameEditForm\";\nimport Router from \"next/router\";\nimport FollowList from \"../components/FollowList\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  LOAD_FOLLOWERS_REQUEST,\n  LOAD_FOLLOWINGS_REQUEST,\n  LOAD_MY_INFO_REQUEST,\n  LOAD_POSTS_REQUEST,\n} from \"../type\";\nimport wrapper from \"../store/configureStore\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport useSWR from \"swr\";\n\nconst fetcher = (url) =>\n  axios.get(url, { withCredentials: true }).then((result) => result.data);\n\nconst Profile = () => {\n  const [followersLimit, setfollowersLimit] = useState(3);\n  const dispatch = useDispatch();\n  const { me } = useSelector((state) => state.user);\n  const { data: followersData, followerError } = useSWR(\n    `http://localhost:3075/user/followers?limit=${followersLimit}`,\n    fetcher\n  );\n  const { data: followingsData, followingError } = useSWR(\n    `http://localhost:3075/user/followingslimit=${followingsLimit}`,\n    fetcher\n  );\n\n  /* useEffect(() => {\n    dispatch({\n      type: LOAD_FOLLOWERS_REQUEST,\n    });\n    dispatch({\n      type: LOAD_FOLLOWINGS_REQUEST,\n    });\n  }, []);\n  */\n\n  useEffect(() => {\n    if (!(me && me.id)) {\n      Router.push(\"/\");\n    }\n  }, [me && me.id]);\n  if (!me) {\n    return \"내 정보 로딩 중\";\n  }\n\n  if (followerError || followingError) {\n    console.error(followerError || followingError);\n    return <div>팔로잉/팔로워 로딩 중 에러가 발생합니다.</div>;\n  }\n\n  return (\n    <>\n      <Head>\n        <title>내 프로필</title>\n      </Head>\n      <AppLayout>\n        <NicknameEditForm />\n        <FollowList header=\"팔로잉\" data={followingsData} />\n        <FollowList header=\"팔로워\" data={followersData} />\n      </AppLayout>\n    </>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  async (context) => {\n    const cookie = context.req ? context.req.headers.cookie : \"\";\n    axios.defaults.headers.Cookie = \"\";\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    } //Cookie 넣어줘야 로그인 새로고침 가능\n    context.store.dispatch({\n      type: LOAD_MY_INFO_REQUEST,\n    });\n    context.store.dispatch({\n      type: LOAD_POSTS_REQUEST,\n    });\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  }\n);\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}